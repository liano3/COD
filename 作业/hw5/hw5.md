# 计算机组成原理

## HW5

### T1

##### (1)

$$
1.0625_{10}-0.6875_{10}=1.0625\times 10^0-6.875\times 10^{-1}\\
\begin{align}
&=1.0625\times 10^0-0.6875\times 10^{0}\\
&=0.375\times 10^0\\
&=3.75\times 10^{-1}\\
&=0.375_{10}
\end{align}
$$



##### (2)

1.0625 表示为浮点数为 `0 01111111 00010`，-0.6875 表示为浮点数为 `1 01111110 01100`
$$
1.0625_{10}-0.6875_{10}=1.00010\times 2^0-1.01100\times 2^{-1}\\
\begin{align}
&=1.00010\times 2^0-0.10110\times 2^0\\
&=0.01100\times 2^0\\
&=1.10000\times 2^{-2}\\
&=0.375_{10}
\end{align}
$$

### T2

##### (1)

`add r1, r2, r3`

取指令：30 + 250

读寄存器：150 (并行control 50)

mux：25

ALU：200

mux：25

写寄存器：20

**总延迟：700ps**

##### (2)

`ld r1, 0(r2)`

取指令：30 + 250

读寄存器：150 (control 50, imm 50, mux 25)

ALU：200

读内存：250

mux：25

写寄存器：20

**总延迟：925ps**

##### (3)

`sd r1, 0(r2)`

取指令：30 + 250

读寄存器：150 (control 50, imm 50, mux 25)

ALU：200

写内存：250

**总延迟：880ps**

##### (4)

`beq r1, r2, label`

取指令：30 + 250

读寄存器：150 (control 50, imm 50)

mux：25

ALU：200 (Add 200)

与门：5

mux：25

写PC：20

**总延迟：705ps**

##### (5)

`addi r1, r2, 1`

取指令：30 + 250

读寄存器：150 (control 50, imm 50)

mux：25

ALU：200

mux：25

写寄存器：20

**总延迟：700ps**

##### (6)

最小时钟周期为 925ps

#### 实验题1

单精度：1 位符号，8 位指数，23 位尾数

双精度：1 位符号，11 位指数，52 位小数

```assembly
# 取尾数
lw t2, 3(t0) # 截断多余位, 读一个字
slli t2, t2, 4 # 清零左边的无效位
srli t2, t2, 9 # 向右对齐
# 取指数
lh t4, 6(t0)
slli t3, t4, 1 # 清零左边的无效位
srli t3, t3, 21 # 清零右边的无效位并右对齐
addi t4, x0, 1 
slli t4, x0, 10
addi t4, t4, -1 # 得到 01111111111
sub t3, t3, t4
addi t3, t3, 127
slli t3, t3, 23 # 左移23位，右边留给尾数
# 取符号
srli t4, t4, 31
slli t4, t4, 31 # 左对齐
# 存储
add t2, t2, t3
add t2, t2, t4 # 拼接各部分
sw t2, 0(t1)
```

