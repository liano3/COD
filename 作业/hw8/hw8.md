# COD

## HW8

### T1

##### (1)

能存储 $\frac{16KB}{32B}=512$ 个块

##### (2)

Index 位宽为 $\log_2{512}=9$ 位

OFFSET 位宽为 $\log_2{32}=5$ 位

TAG 位宽为 $32-9-5=18$ 位

##### (3)

Index 位宽为 $\log_2{\frac{512}{4}}=7$ 位

OFFSET 位宽为 $\log_2{32}=5$ 位

TAG 位宽为 $32-7-5=20$ 位

### T2

两组，每组 16B，即两个块，所以有：

Index 位宽为 $\log_2{2}=1$ 位

OFFSET 位宽为 $\log_2{8}=3$ 位

TAG 位宽为 $8-1-3=4$ 位

填表如下：

| Address    | Tag  | Index | Offset | Hit?    | Miss Type |
| ---------- | ---- | ----- | ------ | ------- | --------- |
| 0b00000100 | 0000 | 0     | 100    | Miss    | 强制失效  |
| 0b00000101 | 0000 | 0     | 101    | Hit     |           |
| 0b01101000 | 0110 | 1     | 000    | Miss    | 强制失效  |
| 0b11001000 | 1100 | 1     | 000    | Miss    | 强制失效  |
| 0b01101000 | 0110 | 1     | 000    | Hit     |           |
| 0b11011101 | 1101 | 1     | 101    | Replace | 强制失效  |
| 0b01000010 | 0100 | 0     | 010    | Miss    | 强制失效  |
| 0b00000100 | 0000 | 0     | 100    | Hit     |           |
| 0b11001000 | 1100 | 1     | 000    | Miss    | 容量失效  |

### T3

##### (1)

每个块的大小为 32 字节，而一个结构体变量有 16 个字节（4 个 int），所以每个块可以存储 2 个结构体，而 cache 有 $\frac{16KB}{32B}=512$ 块，足够存储 1024 个结构体。

充分多次调用后 Cache 中储存的是 1024-2047 的信息。

所以再次调用，会循环产生一次容量失效，接着一次命中，所以命中率为 $50\%$

##### (2)

Index 最大为 $\frac{512}{8}=64$，即 64 组

依然会循环产生一次容量失效，接着一次命中，所以命中率为 $50\%$

##### (3)

依然是容量失效，命中率为 50%

##### (4)

不一定，在直接映射或组相联映射中，可能会出现冲突失效

##### (5)

不一定，在 Cache 容量一定的条件下，增加块的数量就会减小块的大小，这会增大失效率
